{% extends "base/layout.html" %}

{% block title %}Order #{{ order.id }} — ShopFlask{% endblock %}

{% block content %}

<a href="{{ url_for('orders.history') }}"
   style="font-size:.82rem; color:var(--clr-text-sm); display:inline-block; margin-bottom:1.2rem;">
  ← Back to My Orders
</a>

<div class="order-header">
  <h1>Order #{{ order.id }}</h1>
  <span class="order-status-badge status-{{ order.status }}">{{ order.status|capitalize }}</span>
</div>

<!-- Line Items -->
<div class="order-list">
  {% for item in order.items %}
    <div class="order-list-row">
      <span>
        <strong>{{ item.product.name }}</strong> × {{ item.quantity }}
      </span>
      <span>${{ "%.2f"|format(item.subtotal) }}</span>
    </div>
  {% endfor %}
  <div class="order-list-row">
    <span>Shipping</span>
    <span style="color:var(--clr-success); font-weight:600;">Free</span>
  </div>
  <div class="order-list-row order-list-row--total">
    <span>Total</span>
    <span>{{ order.total_display }}</span>
  </div>
</div>

<!-- Meta boxes -->
<div class="order-meta">
  <div class="order-meta-box">
    <h4>Shipping Address</h4>
    <p>
      {{ order.shipping_name }}<br>
      {{ order.shipping_address }}<br>
      {{ order.shipping_city }}, {{ order.shipping_state }} {{ order.shipping_zip }}<br>
      {{ order.shipping_country }}
    </p>
  </div>
  <div class="order-meta-box">
    <h4>Order Info</h4>
    <p>
      <strong>Placed:</strong> {{ order.created_at.strftime('%B %d, %Y at %I:%M %p') }}<br>
      <strong>Email:</strong> {{ order.shipping_email }}<br>
      <strong>Status:</strong> {{ order.status|capitalize }}
    </p>
  </div>
</div>

{% endblock %}
